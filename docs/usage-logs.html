<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Triva — Testing</title>
    <!-- Icons (Lucide via CDN) -->
    <script src="https://unpkg.com/lucide@latest"></script>
    <link rel="stylesheet" href="assets/style.css">
</head>
<body>

    <aside class="sidebar" id="sidebar">
        <div class="sidebar-header"> <span class="logo">Dashboard</span> </div>
        <nav class="nav"> 
            <a href="./index.html" class="nav-item" data-page="overview"> 
            <i data-lucide="panels-top-left"></i> 
            <span>Overview</span> 
            </a> 
            <a href="./install.html" class="nav-item" data-page="docs"> 
            <i data-lucide="square-terminal"></i> 
            <span>Installation</span> 
            </a> 
            <a href="./_" class="nav-item" data-page="docs"> 
            <i data-lucide="braces"></i> 
            <span>Useage</span> 
            </a> 
            <a href="./_" class="nav-item" data-page="docs"> 
            <i data-lucide="database"></i> 
            <span>Examples</span> 
            </a> 
            <a href="./_" class="nav-item" data-page="docs"> 
            <i data-lucide="bug"></i> 
            <span>Bugs</span> 
            </a> 
            <a href="./_" class="nav-item-heart" data-page="docs"> 
            <i data-lucide="heart-handshake"></i> 
            <span>Contribute</span> 
            </a> 
        </nav>
    </aside>

    <main id="usage">

    <header class="page-header">
        <h1>Usage</h1>
        <p>
        Triva’s logging system is entirely middleware-driven. Logs are generated automatically
        at request time and persisted based on your configured middleware settings. Developers
        do not manually write logs — they query, filter, and manage them through the <code>log</code> API.
        </p>
    </header>

    <!-- ================================================= -->
    <!-- OVERVIEW -->
    <!-- ================================================= -->
    <section id="usage-overview">
        <h2>Logging Model Overview</h2>

        <p>
        Once Triva middleware is installed and mounted, every incoming request is analyzed and
        logged automatically. This includes device data, operating system, browser details,
        CPU architecture, and bot / AI detection where applicable.
        </p>

        <p>
        The developer-facing surface area is intentionally small. Interaction with logs happens
        exclusively through:
        </p>

        <ul>
        <li><code>log.get()</code> — retrieve logs</li>
        <li><code>log.clear()</code> — remove all logs</li>
        <li><code>log.delete()</code> — remove specific log entries</li>
        </ul>

        <div class="callout callout-info">
        <strong>Important:</strong> Logs are immutable once written. You may delete logs,
        but you cannot edit or overwrite existing log records.
        </div>
    </section>

    <!-- ================================================= -->
    <!-- log.get -->
    <!-- ================================================= -->
    <section id="log-get">
        <h2>log.get()</h2>

        <p>
        <code>log.get()</code> is used to retrieve stored log entries. It supports three invocation
        modes: full retrieval, single-entry lookup, and filtered queries.
        </p>

        <h3>1. Retrieve All Logs</h3>

        <pre><code class="language-js">const logs = await log.get(all);</code></pre>

        <p>
        Passing <code>all</code> returns every stored log entry. This is useful for analytics dashboards,
        batch exports, or offline processing.
        </p>

        <div class="callout callout-warning">
        <strong>Warning:</strong> Retrieving all logs may be expensive on large datasets.
        Use filters whenever possible.
        </div>

        <h3>2. Retrieve a Log by ID</h3>

        <pre><code class="language-js">const entry = await log.get("c8a7f1d2");</code></pre>

        <p>
        Each log entry is assigned a unique identifier at creation time. Supplying an ID returns
        a single log object or <code>null</code> if no match exists.
        </p>

        <h3>3. Filtered Retrieval</h3>

        <pre><code class="language-js">const logs = await log.get.filter({
    browser: "Chrome",
    os: "Windows",
    bot: false
});
</code></pre>

        <p>
        Filtered queries allow you to narrow results based on specific recorded attributes.
        Multiple filters are combined using logical AND.
        </p>

        <!-- ================================================= -->
        <!-- FILTER TABLE -->
        <!-- ================================================= -->
        <h3>Available Filters</h3>

        <table class="api-table">
        <thead>
            <tr>
            <th>Filter</th>
            <th>Stored As</th>
            <th>Description</th>
            </tr>
        </thead>
        <tbody>
            <tr>
            <td>CPU Architecture</td>
            <td><b>String:</b> <code>CPU</code></td>
            <td>x64, arm, arm64, etc.</td>
            </tr>
            <tr>
            <td>Device</td>
            <td><b>String:</b> <code>Type</code></td>
            <td>Derived from UA analysis</td>
            </tr>
            <tr>
            <td>Engine</td>
            <td><b>String:</b> <code>Type</code></td>
            <td>Rendering engine</td>
            </tr>
            <tr>
            <td>OS</td>
            <td><b>String:</b> <code>OS Name</code> / <code>Version</code></td>
            <td>Windows, macOS, Linux, Android, iOS</td>
            </tr>
            <tr>
            <td>Browser</td>
            <td><b>String:</b> <code>Name</code> / <code>Version</code> / <code>Major</code></td>
            <td>Granular browser identification</td>
            </tr>
            <tr>
            <td>AI Bot</td>
            <td><b>Boolean:</b> <code>True</code> / <code>False</code></td>
            <td>True if identified as an AI agent</td>
            </tr>
            <tr>
            <td>Bot</td>
            <td><b>Boolean:</b> <code>True</code> / <code>False</code></td>
            <td>Traditional crawler or automation</td>
            </tr>
            <tr>
            <td>AI Crawler</td>
            <td><b>Boolean:</b> <code>True</code> / <code>False</code></td>
            <td>AI-driven indexing systems</td>
            </tr>
        </tbody>
        </table>

        <div class="callout callout-info">
        Filters may be combined arbitrarily. Unsupported filter keys are ignored.
        </div>
    </section>

    <!-- ================================================= -->
    <!-- log.delete -->
    <!-- ================================================= -->
    <section id="log-delete">
        <h2><code>log.delete()</code></h2>

        <pre><code class="language-js">
    await log.delete("c8a7f1d2");
    </code></pre>

        <p>
        Deletes a single log entry by ID. This operation is permanent and cannot be undone.
        </p>

        <p>
        Deleting logs is commonly used to comply with internal retention policies or
        remove test data from development environments.
        </p>

        <div class="callout callout-warning">
        Deleted logs are removed immediately and irreversibly.
        </div>
    </section>

    <!-- ================================================= -->
    <!-- log.clear -->
    <!-- ================================================= -->
    <section id="log-clear">
        <h2><code>log.clear()</code></h2>

        <pre><code class="language-js">
    await log.clear();
    </code></pre>

        <p>
        Removes all stored log entries. This operation does not affect middleware configuration
        and logging will resume automatically on subsequent requests.
        </p>

        <p>
        Typical use cases include:
        </p>

        <ul>
        <li>Resetting logs during development</li>
        <li>Pre-deployment cleanup</li>
        <li>Controlled data purges</li>
        </ul>

        <div class="callout callout-warning">
        <strong>Extreme Caution:</strong> This action deletes every log entry in storage.
        </div>
    </section>

    <!-- ================================================= -->
    <!-- CTA -->
    <!-- ================================================= -->
    <section class="cta cta-success">
        <h2>Next Steps</h2>
        <p>
        Continue with the <a href="examples.html">Examples</a> page to see real-world usage patterns,
        or review the <a href="bugs.html">Bugs</a> page to help improve Triva’s logging engine.
        </p>
    </section>

    </main>

    <script>lucide.createIcons();</script>

</body>
</html>
